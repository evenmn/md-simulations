TITLE:  The Water Project
AUTHOR: Even Marius Nordhagen
DATE: today

TOC: on

======= Introduction =======
Water is a substance that is found everywhere on earth, and is a fundamental requirement for life to occur the way we know it. Therefore, knowledge of water is important both on microscopic and the macroscopic scales. Despite this, general inter-atomic water potentials are often unavailable. The most popular water potentials are tailored in order to model specific properties of water, and if we use the potential to study other properties they will not work. 

The complexity of water is what makes it hard to find flexible potentials. The water molecules are not static, the distance between the atoms and the three-body angle changes with time, and occasionally OH$^-$-groups and H$_3$O$^+$-groups will occur. Therefore, a realistic water potential does not model the water molecule as a static object, but instead it should set up an inter-atomic potential between all the atoms, based on charge interaction, dipole-dipole-interaction, van der Vaals interactions and so on. 

The Vashishta potential is an inter-atomic potential developed by Vashishta et al. at the University of Southern California. It is very flexible, and has shown impressive power as silica potential (Vashishta, 1990), SiC potential (Vashishta, 2007) and InP potential (Branicio, 2009). We aim to tweak the parameters in the potential such that the water behaves realistic under 1 atm pressure.

!split
======= Packing water =======
Before we can start a simulation, we need to pack water. This should be done wisely, as an unphysical initial water bulk will give unphysical results. Firstly, it is important to pack the water with the correct density. The water density at 1 atm pressure and 300K is 0.9966 g/cm$^3$. Secondly, it is important that the spacing between molecules are appropriate, in order to start with a realistic potential energy.

===== Find correct volume =====
We will use the Packmol package to pack water. It packs the water in a cubic box, and takes the length of the sides of the box as an input. The first thing we need to do, is therefore to find the length of the box side at a given density. The class `WaterPack` found in `python/pack_water.py` contains a function for this, and the length can be found from

!bc python
from pack_water import WaterPack

number = 2000       # Number of water molecules
density = 0.9966    # Density of water at 25°C and 1atm

packer = WaterPack(number)
length = packer.den2len(density)        # Length of box in [Å]
!ec

===== Generate Packmol input script =====
Thereafter, we would like to generate a Packmol input script, based on the volume of the cubic box and the number of molecules. This is done by

!bc python
packer.packmol_gen(pbc=1.0)
!ec

The argument `pbc=1.0` is added to have an appropriate spacing between the molecules also at the boundaries. 

===== Run Packmol =====
We are now ready to run Packmol and generate the positions of all the atoms. Simply run

!bc python
packer.packmol_run()
!ec

PS: This requires that the Packmol package is installed correctly. See "the Packmol webpage" : "http://m3g.iqm.unicamp.br/packmol/home.shtml".

===== Convert to LAMMPS-friendly format =====
The file generated by Packmol is on XYZ-format, which LAMMPS does not support. To convert the file to a LAMMPS-friendly file, run

!bc python
read_data = "data/water_lmps.data"
packer.xyz2lmp(read_data)
!ec

Now we finally have a realistic initial water configuration. It is presented in figures ref{fig:front} and ref{fig:perspective}.

FIGURE: [fig/initial_config_front.png, width=500 frac=0.8] Initial configuration of water, seen from the front. label{fig:front}

FIGURE: [fig/initial_config_perspective.png, width=500 frac=0.8] Initial configuration of water, seen from perspective. label{fig:perspective}

!split
======= 
